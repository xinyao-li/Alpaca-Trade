2023-04-28 15:08:15,738 - INFO - buying power is: 20736.890849008036
2023-04-28 15:08:15,739 - INFO - last trade price is: 29527.72
2023-04-28 15:08:15,739 - INFO - holding amount is: 2.557906988
2023-04-28 15:08:16,386 - INFO - Bought 0.07051047395543224 of BTC/USD at price: 29409.6602756
2023-04-28 15:08:16,534 - INFO - last trade price is: 29409.6602756
2023-04-28 15:08:22,672 - INFO - buying power is: 20736.890849008036
2023-04-28 15:08:22,674 - INFO - last trade price is: 29409.6602756
2023-04-28 15:08:22,674 - INFO - holding amount is: 2.628290542
2023-04-28 17:51:57,604 - INFO - Bought in -1s
2023-04-28 17:51:57,606 - INFO - last trade price is: 29340.91295
2023-04-28 17:57:51,177 - INFO - buying power is: 20736.890849008036
2023-04-28 17:57:51,178 - INFO - last trade price is: 29340.91295
2023-04-28 17:57:51,178 - INFO - holding amount is: 0
2023-04-28 17:57:52,182 - INFO - Bought in -2s or lower
2023-04-28 17:57:52,183 - INFO - last trade price is: 29305.865
2023-04-28 19:31:39,525 - INFO - Sold 0.07064222232263065 of BTC/USD at price: 29354.811
2023-04-28 19:31:39,611 - INFO - last trade price is: 29354.811
2023-04-28 21:13:12,264 - ERROR - Sell Order submission failed
Traceback (most recent call last):
  File "/Users/xinyaoli/PycharmProjects/Alpaca-Test/venv/lib/python3.8/site-packages/urllib3/connectionpool.py", line 703, in urlopen
    httplib_response = self._make_request(
  File "/Users/xinyaoli/PycharmProjects/Alpaca-Test/venv/lib/python3.8/site-packages/urllib3/connectionpool.py", line 449, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "/Users/xinyaoli/PycharmProjects/Alpaca-Test/venv/lib/python3.8/site-packages/urllib3/connectionpool.py", line 444, in _make_request
    httplib_response = conn.getresponse()
  File "/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/http/client.py", line 1322, in getresponse
    response.begin()
  File "/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/http/client.py", line 303, in begin
    version, status, reason = self._read_status()
  File "/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/http/client.py", line 264, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/socket.py", line 669, in readinto
    return self._sock.recv_into(b)
  File "/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/ssl.py", line 1241, in recv_into
    return self.read(nbytes, buffer)
  File "/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/ssl.py", line 1099, in read
    return self._sslobj.read(len, buffer)
ConnectionResetError: [Errno 54] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/xinyaoli/PycharmProjects/Alpaca-Test/venv/lib/python3.8/site-packages/requests/adapters.py", line 489, in send
    resp = conn.urlopen(
  File "/Users/xinyaoli/PycharmProjects/Alpaca-Test/venv/lib/python3.8/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    retries = retries.increment(
  File "/Users/xinyaoli/PycharmProjects/Alpaca-Test/venv/lib/python3.8/site-packages/urllib3/util/retry.py", line 550, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/Users/xinyaoli/PycharmProjects/Alpaca-Test/venv/lib/python3.8/site-packages/urllib3/packages/six.py", line 769, in reraise
    raise value.with_traceback(tb)
  File "/Users/xinyaoli/PycharmProjects/Alpaca-Test/venv/lib/python3.8/site-packages/urllib3/connectionpool.py", line 703, in urlopen
    httplib_response = self._make_request(
  File "/Users/xinyaoli/PycharmProjects/Alpaca-Test/venv/lib/python3.8/site-packages/urllib3/connectionpool.py", line 449, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "/Users/xinyaoli/PycharmProjects/Alpaca-Test/venv/lib/python3.8/site-packages/urllib3/connectionpool.py", line 444, in _make_request
    httplib_response = conn.getresponse()
  File "/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/http/client.py", line 1322, in getresponse
    response.begin()
  File "/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/http/client.py", line 303, in begin
    version, status, reason = self._read_status()
  File "/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/http/client.py", line 264, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/socket.py", line 669, in readinto
    return self._sock.recv_into(b)
  File "/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/ssl.py", line 1241, in recv_into
    return self.read(nbytes, buffer)
  File "/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/ssl.py", line 1099, in read
    return self._sslobj.read(len, buffer)
urllib3.exceptions.ProtocolError: ('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/xinyaoli/PycharmProjects/Alpaca-Test/main.py", line 105, in grid_trading
    self.api.submit_order(ticker, selling_amount, 'sell', 'limit', time_in_force='gtc', limit_price=bid_price)
  File "/Users/xinyaoli/PycharmProjects/Alpaca-Test/venv/lib/python3.8/site-packages/alpaca_trade_api/rest.py", line 429, in submit_order
    resp = self.post('/orders', params)
  File "/Users/xinyaoli/PycharmProjects/Alpaca-Test/venv/lib/python3.8/site-packages/alpaca_trade_api/rest.py", line 253, in post
    return self._request('POST', path, data)
  File "/Users/xinyaoli/PycharmProjects/Alpaca-Test/venv/lib/python3.8/site-packages/alpaca_trade_api/rest.py", line 213, in _request
    return self._one_request(method, url, opts, retry)
  File "/Users/xinyaoli/PycharmProjects/Alpaca-Test/venv/lib/python3.8/site-packages/alpaca_trade_api/rest.py", line 232, in _one_request
    resp = self._session.request(method, url, **opts)
  File "/Users/xinyaoli/PycharmProjects/Alpaca-Test/venv/lib/python3.8/site-packages/requests/sessions.py", line 587, in request
    resp = self.send(prep, **send_kwargs)
  File "/Users/xinyaoli/PycharmProjects/Alpaca-Test/venv/lib/python3.8/site-packages/requests/sessions.py", line 701, in send
    r = adapter.send(request, **kwargs)
  File "/Users/xinyaoli/PycharmProjects/Alpaca-Test/venv/lib/python3.8/site-packages/requests/adapters.py", line 547, in send
    raise ConnectionError(err, request=request)
requests.exceptions.ConnectionError: ('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer'))
2023-04-28 21:13:12,268 - INFO - last trade price is: 29354.811
2023-04-28 22:20:17,449 - INFO - Sold half amounts
2023-04-28 22:20:17,450 - INFO - last trade price is: 29437.084
2023-04-28 22:35:43,002 - INFO - buying power is: 20736.890849008036
2023-04-28 22:35:43,005 - INFO - last trade price is: 29437.084
2023-04-28 22:35:43,005 - INFO - holding amount is: 0
2023-04-28 22:56:03,103 - INFO - buying power is: 20736.890849008036
2023-04-28 22:56:03,104 - INFO - last trade price is: 29437.084
2023-04-28 22:56:03,106 - INFO - holding amount is: 1.349414812
2023-04-28 23:32:33,696 - INFO - Bought 0.07055463217865068 of BTC/USD at price: 29391.25357
2023-04-28 23:32:33,791 - INFO - last trade price is: 29391.25357
